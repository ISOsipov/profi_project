{% extends "base.html" %}

{% block content %}
<h2>Profile of {{ specialist.name }}</h2>
{% if specialist.profile_picture %}
<img src="{{ specialist.profile_picture }}" alt="Profile picture" style="max-width: 200px;">
{% else %}
<p>No profile picture uploaded</p>
{% endif %}
<p>Specialty: {{ specialist.specialty }}</p>
<p>Location: {{ specialist.location }}</p>
<p>Experience: {{ specialist.experience or 'Not specified' }} years</p>
<p>About: {{ specialist.about or 'Not specified' }}</p>
<p>Education: {{ specialist.education or 'Not specified' }}</p>
<p>Certifications: {{ specialist.certifications or 'Not specified' }}</p>

<h3>Average Rating: {{ '%.1f' % specialist.average_rating() if specialist.average_rating() else 'No ratings yet' }}</h3>

<h3>Reviews</h3>
{% if specialist.reviews %}
{% for review in specialist.reviews %}
<div>
    <p>Rating: {{ review.rating }}/5</p>
    <p>{{ review.content }}</p>
    <p>Posted on: {{ review.created_at.strftime('%Y-%m-%d') }}</p>
</div>
{% endfor %}
{% else %}
<p>No reviews yet.</p>
{% endif %}

{% if current_user.is_authenticated %}
<a href="{{ url_for('add_review', specialist_id=specialist.id) }}">Add a Review</a>
{% else %}
<p>Please <a href="{{ url_for('login') }}">log in</a> to add a review.</p>
{% endif %}
{% if current_user.id == specialist.id %}
<a href="{{ url_for('edit_profile', id=specialist.id) }}">Edit Profile</a>
{% endif %}
{% endblock %}